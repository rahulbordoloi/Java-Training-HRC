Ext.application({
	name : '_',

	launch : function() {
		
		Ext.define('Movies', {
         extend: 'Ext.data.Model',
		 pageSize:5,
         fields: ['Title', 'Description', 'Release Year', 'Language', 'Director', 'Rating', 'Special_Features']
     	});
		
		var userStore = Ext.create('Ext.data.Store', {
			storeId:'DescriptionStore',
		    model: 'Movies',
            enablePaging: true,
			pageSize:5,
			proxy: {
                 type: 'memory',
                 enablePaging: true,
                 reader: {
                     rootProperty: 'topics',
                     totalProperty: 'totalResults'
                 }
             },
		    data: [
		        { Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
		        { Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
				{ Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
				{ Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
				{ Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
				{ Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
				{ Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
				{ Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
				{ Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
				{ Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
				{ Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
				{ Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
				{ Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
				{ Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
				{ Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
				{ Title: 'Academy Dinosaur', Description: 'Academy Dinosaur is a movie about Dianosaurs Ofcourse', Release_Year: '2006', Language: 'English', Director: 'Nolan', Rating: 'PG', Special_Features: 'Deleted Scene' },
		   	]
		});
		
		Ext.create('Ext.form.Panel', {
		    renderTo: document.body,
		    title: 'Movie Advance Search',		    
		    bodyPadding: 50,
			buttonAlign : 'center',   
		    items: [{
					defaultType: 'textfield',
	                layout : 'hbox',
					width : '100%',
					align:'center',
					border: false, 
					bodyPadding: 5,			
					items:[
			        {
			            fieldLabel: 'Movie Name',
			            name: 'movieName',
						width:300,
						margin:'5 50 5 150'
			        },
			        {
			            fieldLabel: 'Director Name',
			            name: 'directorName',
						width:300,
						margin:'5 50 5 50'
			        }],
					}, {
					defaultType: 'textfield',
	                layout : 'hbox',
					width : '100%',
					align:'center',
					border: false, 
					bodyPadding: 5,					
					items:[
			        {
			            xtype: 'datefield',
			            fieldLabel: 'Release Year',
			            name: 'releaseYear',
						width:300,
						margin:'5 50 5 150'					
			        },
					{
						xtype: 'combobox',
			            fieldLabel: 'Language',
			            name: 'language',
						width:300,
						margin:'5 50 5 50'					
			        }]
				}
		    ],

			buttons: [{
				        text: 'Search',
				        formBind: true, //only enabled once the form is valid
				        disabled: true,
				        handler: function() {
				            var form = this.up('form').getForm();
				            if (form.isValid()) {
				                form.submit({
				                    success: function(form, action) {
				                       Ext.Msg.alert('Success', action.result.msg);
				                    },
				                    failure: function(form, action) {
				                        Ext.Msg.alert('Failed', action.result.msg);
				                    }
				                });
				            }
				        }
				    },
					{
				        text: 'Reset',
				        handler: function() {
				            this.up('form').getForm().reset();
				        }
				    }],
		});
		
		Ext.create('Ext.grid.Panel', {
		    renderTo: Ext.getBody(),
		    store: userStore,
			selModel: {
		        selType: 'checkboxmodel',
		        mode: 'MULTI',
		        checkOnly: true,
		        listeners: {
		            select: function (model, record, index, eOpts) {
		                Ext.Msg.alert('', userStore.data.items[index].data['Title']);
						console.log(userStore.data.items[index].data['Title'])
		            }
		        }
		    },
		    plugins: [{
		        ptype: 'rowediting',
		        clicksToEdit: 1
		    }],
			pageSize:4,
		    flex: 1,
		    title: 'Movie Grid',
			store: Ext.data.StoreManager.lookup('DescriptionStore'),
         	dockedItems: [{
	            xtype: 'pagingtoolbar',
	            store: Ext.data.StoreManager.lookup('DescriptionStore'),
	            displayInfo: true,
	            dock: 'bottom',
                displayMsg: 'Displaying {0} to {1} of {2} &nbsp;records ',
                emptyMsg: "No records to display&nbsp;"
         	}],
		    columns: [
		        {
		            text: 'Title',		            
		            dataIndex: 'Title',
		            flex: 1
		        },
		        {
		            text: 'Description',
		            width: 300,
		            //flex: 1,
		            dataIndex: 'Description'
		        },
		        {
		            text: 'Release Year',
		            flex: 1,
		            dataIndex: 'Release_Year'
		        },
				{
		            text: 'Language',
		            flex: 1,
		            dataIndex: 'Language'
		        },
				{
		            text: 'Director',
		            flex: 1,
		            dataIndex: 'Director'
		        },
				{
		            text: 'Rating',
		            flex: 1,
		            dataIndex: 'Rating'
		        },
				{
		            text: 'Special Features',
		            flex: 1,
		            dataIndex: 'Special_Features'
		        }
		    ],
		});		
	}
});