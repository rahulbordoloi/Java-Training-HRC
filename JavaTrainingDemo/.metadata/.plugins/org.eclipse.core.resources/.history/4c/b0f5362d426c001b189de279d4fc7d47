// AJX Class to get in API Data
Ext.onReady(function(){

    /*
    Ext.Ajax.request({
        url: 'http://localhost:8080/JavaDemo/DemoDBConnection',
        method: 'GET',
        timeout: 60000,
        params: {

        },
        headers: {
            'Content-Type': 'application/json'
        },
        success: function (response) {
            var responseResult = Ext.decode(response.responseText)
            console.log(responseResult)
            Ext.Msg.alert('Status', 'Request Succesful!');
        },
        failure: function (response) {
            console.log("Failed Status: " + response.status)
            Ext.Msg.alert('Status', 'Request Failed!');
        }
    });
    */
    
    Ext.create("Ext.panel.Panel", {
        width : 500,
        height : 500,
        renderTo : Ext.getBody(),
        layout : 'fit',
        items : [{
            xtype : 'grid',
            listeners : {
                boxready : function(obj) {

                    Ext.Ajax.request({
                        url: 'http://localhost:8080/JavaDemo/DemoDBConnection',
                        method: 'GET',
                        timeout: 60000,
                        params: {
                
                        },
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        success: function (response) {
                            var responseResult = Ext.decode(response.responseText)
                            console.log(responseResult)
                            var storeContent = obj.getStore();
                            storeContent.loadData(responseResult);
                            Ext.Msg.alert('Status', 'Request Succesful!');
                        },
                        failure: function (response) {
                            console.log("Failed Status: " + response.status)
                            Ext.Msg.alert('Status', 'Request Failed!');
                        }
                    });

                }
            },
            columns : [{
                text : 'No. of Columns',
                dataIndex : 'noOfCols'
            }, {
                text : 'Result Status',
                dataIndex : 'resultStatus'
            }],
            store : {
                fields : ['noOfCols', 'resultStatus'],
                data : []
            }
        }]
    })

});